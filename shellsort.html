<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shell Sort Sliding Window</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1, h2 {
            text-align: center;
        }
        section {
            background-color: #fff;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        pre {
            background-color: #f9f9f9;
            padding: 10px;
            border-left: 4px solid #007bff;
            overflow-x: auto;
            font-family: monospace;
            white-space: pre-wrap;
        }
        ul#program-list {
            list-style-type: none;
            padding: 0;
        }
        li {
            background-color: #fff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        li:hover {
            background-color: #e0e0e0;
        }
        #modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #modal.show {
            display: flex;
            opacity: 1;
        }
        #modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.5s ease;
        }
        #modal.show #modal-content {
            transform: scale(1);
        }
        #close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
        }
        #next-btn {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }
        #next-btn:hover {
            background-color: #0056b3;
        }
        .code-line {
            display: none;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-left: 4px solid #007bff;
        }
        .code-line.active {
            display: block;
        }
        .code-line code {
            display: block;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .explanation {
            font-style: italic;
            color: #555;
            margin-top: 5px;
        }
        #step-by-step .slide {
            display: none;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        #step-by-step .slide.active {
            display: block;
            animation: slideIn 0.5s ease-in-out;
        }
        #step-by-step .pass-step p {
            margin: 5px 0;
        }
        #next-step-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }
        #next-step-btn:hover {
            background-color: #218838;
        }
        .highlight {
            font-size: 1.5em;
            font-weight: bold;
            color: #d32f2f;
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <h1>Shell Sort</h1>
    
    <section id="definition">
        <h2>Definition</h2>
        <p>Shell Sort is an in-place comparison-based sorting algorithm that generalizes insertion sort by allowing the comparison and exchange of elements that are far apart. It starts with a large gap and performs insertion sort on subarrays defined by that gap, reducing the gap in each iteration until it becomes 1, resulting in a fully sorted array. Shell Sort is not stable, with a time complexity that depends on the gap sequence (e.g., O(n²) for some sequences, better for optimized ones like O(n^1.3)). It is used when a balance between simplicity and performance is needed.</p>
    </section>
    
    <section id="step-by-step">
        <h2>Step-by-Step Sorting (Sample Array: 8, 7, 6, 5, 4, 3, 2, 1)</h2>
        <div id="slides-container"></div>
        <button id="next-step-btn">Next Step</button>
    </section>
    
    <section id="program">
        <h2>Java Program for Shell Sort</h2>
        <ul id="program-list">
            <li data-program="1">Click to view Shell Sort Program line by line</li>
        </ul>
    </section>
    
    <section id="output">
        <h2>Output with All Passes</h2>
        <pre id="output-pre">
Initial array:
8 7 6 5 4 3 2 1 
After gap 4:
4 3 2 1 8 7 6 5 
After gap 2:
2 3 4 1 6 5 8 7 
After gap 1:
1 2 3 4 5 6 7 8 
        </pre>
    </section>
    
    <section id="real-world">
        <h2>Real-World Examples</h2>
        <ul>
            <li>Educational purposes: Used to teach advanced sorting concepts as an improvement over insertion sort. <a href="https://www.geeksforgeeks.org/shellsort/">(GeeksforGeeks)</a></li>
            <li>Medium-sized datasets: Efficient for sorting lists where quicksort or mergesort might be overkill, such as in embedded systems. <a href="https://www.programiz.com/dsa/shell-sort">(Programiz)</a></li>
            <li>Performance tuning: Applied in scenarios requiring a balance between simplicity and speed, like sorting data in real-time applications. <a href="https://www.javatpoint.com/shell-sort">(JavatPoint)</a></li>
            <li>Database systems: Used in some database indexing algorithms where partial sorting with gaps improves performance. <a href="https://www.tutorialspoint.com/data_structures_algorithms/shell_sort_algorithm.htm">(TutorialsPoint)</a></li>
            <li>Real-life analogies: Similar to organizing items by grouping them coarsely first, then refining the order, like sorting books by category before alphabetizing. <a href="https://www.quora.com/What-are-some-real-world-applications-of-shell-sort">(Quora)</a></li>
        </ul>
    </section>
    
    <div id="modal">
        <div id="modal-content">
            <span id="close-btn">&times;</span>
            <h2 id="program-title"></h2>
            <div id="program-details"></div>
            <button id="next-btn">Next Line</button>
        </div>
    </div>
    
    <script>
        const steps = [
            {
                title: "Initial Array",
                array: [8, 7, 6, 5, 4, 3, 2, 1],
                operations: [],
                explanation: "This is the starting array, in reverse order (descending). Shell Sort will use a sequence of gaps (4, 2, 1) to perform insertion sort on subarrays, gradually reducing the gap to sort the entire array."
            },
            {
                title: "Gap 4",
                array: [4, 3, 2, 1, 8, 7, 6, 5],
                operations: [
                    { indices: [0, 4], array: [4, 7, 6, 5, 8, 3, 2, 1], desc: "Compare 8 and 4 (indices 0, 4): 8 > 4, swap → 4 to index 0, 8 to index 4." },
                    { indices: [1, 5], array: [4, 3, 6, 5, 8, 7, 2, 1], desc: "Compare 7 and 3 (indices 1, 5): 7 > 3, swap → 3 to index 1, 7 to index 5." },
                    { indices: [2, 6], array: [4, 3, 2, 5, 8, 7, 6, 1], desc: "Compare 6 and 2 (indices 2, 6): 6 > 2, swap → 2 to index 2, 6 to index 6." },
                    { indices: [3, 7], array: [4, 3, 2, 1, 8, 7, 6, 5], desc: "Compare 5 and 1 (indices 3, 7): 5 > 1, swap → 1 to index 3, 5 to index 7." }
                ],
                explanation: "With gap 4, compare and swap elements 4 positions apart: (8,4), (7,3), (6,2), (5,1). This forms subarrays [4,8], [3,7], [2,6], [1,5], partially sorting the array. Smaller elements move left, larger ones right."
            },
            {
                title: "Gap 2",
                array: [2, 3, 4, 1, 6, 5, 8, 7],
                operations: [
                    { indices: [0, 2], array: [2, 3, 6, 1, 4, 5, 8, 7], desc: "Compare 4 and 2 (indices 0, 2): 4 > 2, swap → 2 to index 0, 4 to index 2." },
                    { indices: [2, 4], array: [2, 3, 4, 1, 6, 5, 8, 7], desc: "Compare 4 and 6 (indices 2, 4): 4 < 6, no swap." },
                    { indices: [1, 3], array: [2, 1, 4, 3, 6, 5, 8, 7], desc: "Compare 3 and 1 (indices 1, 3): 3 > 1, swap → 1 to index 1, 3 to index 3." },
                    { indices: [3, 5], array: [2, 1, 4, 3, 6, 5, 8, 7], desc: "Compare 3 and 5 (indices 3, 5): 3 < 5, no swap." },
                    { indices: [4, 6], array: [2, 1, 4, 3, 6, 5, 8, 7], desc: "Compare 6 and 8 (indices 4, 6): 6 < 8, no swap." },
                    { indices: [5, 7], array: [2, 1, 4, 3, 6, 5, 8, 7], desc: "Compare 5 and 7 (indices 5, 7): 5 < 7, no swap." }
                ],
                explanation: "With gap 2, compare and swap elements 2 positions apart in subarrays: [4,2,6,8], [3,1,5,7]. Swaps occur for (4,2) and (3,1), further sorting subarrays [2,4,6,8] and [1,3,5,7]. The array is now closer to sorted."
            },
            {
                title: "Gap 1",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [
                    { indices: [0, 1], array: [1, 2, 4, 3, 6, 5, 8, 7], desc: "Take 1, compare with 2: 1 < 2, place 1 at index 0 (no shift needed)." },
                    { indices: [1, 2], array: [1, 2, 4, 3, 6, 5, 8, 7], desc: "Take 4, compare with 2: 4 > 2, place 4 at index 2." },
                    { indices: [2, 3], array: [1, 2, 3, 4, 6, 5, 8, 7], desc: "Take 3, compare with 4: 3 < 4, shift 4 right, place 3 at index 2." },
                    { indices: [3, 4], array: [1, 2, 3, 4, 6, 5, 8, 7], desc: "Take 6, compare with 4: 6 > 4, place 6 at index 4." },
                    { indices: [4, 5], array: [1, 2, 3, 4, 5, 6, 8, 7], desc: "Take 5, compare with 6: 5 < 6, shift 6 right, place 5 at index 4." },
                    { indices: [5, 6], array: [1, 2, 3, 4, 5, 6, 8, 7], desc: "Take 8, compare with 6: 8 > 6, place 8 at index 6." },
                    { indices: [6, 7], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Take 7, compare with 8: 7 < 8, shift 8 right, place 7 at index 6." }
                ],
                explanation: "With gap 1, perform standard insertion sort on the entire array, which is nearly sorted from previous gaps. Elements are inserted into their correct positions, shifting larger elements right, resulting in the fully sorted array."
            },
            {
                title: "Final Sorted Array",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [],
                explanation: "After processing gaps 4, 2, and 1, the array is fully sorted in ascending order. Shell Sort’s use of decreasing gaps allowed coarse sorting followed by fine-tuning, reducing the number of comparisons and swaps compared to standard insertion sort."
            }
        ];

        let currentStepIndex = 0;

        function renderSlides() {
            const container = document.getElementById('slides-container');
            container.innerHTML = '';
            steps.forEach((step, index) => {
                const slide = document.createElement('div');
                slide.className = `slide ${index === currentStepIndex ? 'active' : ''}`;
                let content = `<p><strong>${step.title}:</strong> [`;
                step.array.forEach((num, i) => {
                    content += i === 0 ? `${num}` : `, ${num}`;
                });
                content += ']</p>';
                if (step.operations.length > 0) {
                    content += '<p><em>Comparisons and Swaps:</em></p>';
                    step.operations.forEach(op => {
                        let arrayStr = '[';
                        op.array.forEach((num, i) => {
                            const isHighlighted = op.indices.includes(i);
                            arrayStr += i === 0 ? '' : ', ';
                            arrayStr += isHighlighted ? `<span class="highlight">${num}</span>` : num;
                        });
                        arrayStr += ']';
                        content += `<p>${op.desc} → ${arrayStr}</p>`;
                    });
                }
                content += `<p><em>Positioning:</em> ${step.explanation}</p>`;
                slide.innerHTML = content;
                container.appendChild(slide);
            });
        }

        document.getElementById('next-step-btn').addEventListener('click', () => {
            currentStepIndex = (currentStepIndex + 1) % steps.length;
            renderSlides();
        });

        renderSlides();

        const programs = {
            1: {
                title: "Shell Sort Program in Java (with Sample Array and Pass Outputs)",
                lines: [
                    { code: 'public class ShellSortExample {', explanation: 'Defines the public class ShellSortExample. This class contains the main logic for the shell sort demonstration. In Java, classes organize code into reusable units. The public modifier allows access from outside. Sets the program structure.' },
                    { code: '    public static void main(String[] args) {', explanation: 'Declares the main method, the entry point of the program. It is static to be callable without an instance. String[] args handles command-line arguments. This method executes the sorting logic.' },
                    { code: '        int[] arr = {8, 7, 6, 5, 4, 3, 2, 1};', explanation: 'Initializes the integer array arr with the sample elements. Uses curly braces for direct initialization. Sets up the reverse-sorted array for demonstration. Prepares the data for sorting.' },
                    { code: '        System.out.println("Initial array:");', explanation: 'Prints a header for the initial array state. Uses println to add a newline. System.out is the standard output stream. Enhances output readability.' },
                    { code: '        printArray(arr);', explanation: 'Calls the printArray method to display the array. Passes arr as argument. Separates printing logic for reusability. Shows the initial state.' },
                    { code: '        int n = arr.length;', explanation: 'Stores the array length in n. arr.length returns the size dynamically. Used in loop conditions. Avoids hardcoding the size.' },
                    { code: '        for (int gap = n / 2; gap > 0; gap /= 2) {', explanation: 'Outer loop to iterate over gaps, starting with n/2 (4) and halving each time until 0. Each gap defines subarrays for insertion sort.' },
                    { code: '            for (int i = gap; i < n; i++) {', explanation: 'Inner loop to iterate over elements starting from index gap. Processes each element for insertion sort within its gap-based subarray.' },
                    { code: '                int temp = arr[i];', explanation: 'Stores the current element (arr[i]) in temp. This is the element to be inserted into the sorted subarray.' },
                    { code: '                int j = i;', explanation: 'Initializes j to the current index i. Used to compare temp with elements at gap intervals to the left.' },
                    { code: '                while (j >= gap && arr[j - gap] > temp) {', explanation: 'While loop to shift elements. Continues as long as j >= gap and the element at j-gap is greater than temp, indicating temp belongs to the left.' },
                    { code: '                    arr[j] = arr[j - gap];', explanation: 'Shifts the element at j-gap to position j, making space for temp. Moves larger elements right within the gap subarray.' },
                    { code: '                    j -= gap;', explanation: 'Decrements j by gap to check the next element to the left in the subarray.' },
                    { code: '                }', explanation: 'Closes the while loop. Stops when arr[j-gap] <= temp or j < gap, indicating temp’s correct position.' },
                    { code: '                arr[j] = temp;', explanation: 'Places temp at its correct position (j). This is where the loop stopped, ensuring the subarray is sorted.' },
                    { code: '            }', explanation: 'Closes the inner for loop. Completes insertion sort for the current gap.' },
                    { code: '            System.out.println("After gap " + gap + ":");', explanation: 'Prints header for the gap result. Uses the current gap value. Informs user of gap completion.' },
                    { code: '            printArray(arr);', explanation: 'Calls printArray to show array after the gap pass. Displays current state for tracking progress.' },
                    { code: '        }', explanation: 'Closes the outer for loop. Ends all gap iterations. Array is now sorted.' },
                    { code: '    }', explanation: 'Closes the main method. Encapsulates all execution logic.' },
                    { code: '    private static void printArray(int[] arr) {', explanation: 'Defines a private static helper method printArray. Takes int[] arr as parameter. Handles array printing.' },
                    { code: '        for (int num : arr) {', explanation: 'Enhanced for loop to iterate array. num takes each element value. Simplifies printing.' },
                    { code: '            System.out.print(num + " ");', explanation: 'Prints each num followed by space. Builds the array output.' },
                    { code: '        }', explanation: 'Closes the enhanced for loop. Ends element iteration.' },
                    { code: '        System.out.println();', explanation: 'Prints a newline after array. Ensures clean output formatting.' },
                    { code: '    }', explanation: 'Closes the printArray method. Ends helper logic.' },
                    { code: '}', explanation: 'Closes the class definition. Encapsulates all methods. Program is complete.' }
                ]
            }
        };

        let currentLineIndex = -1;

        document.querySelectorAll('#program-list li').forEach(item => {
            item.addEventListener('click', () => {
                const programId = item.getAttribute('data-program');
                const program = programs[programId];
                if (!program) {
                    console.error(`Program ${programId} not found`);
                    return;
                }

                currentLineIndex = -1;

                document.getElementById('program-title').textContent = program.title;

                const details = document.getElementById('program-details');
                details.innerHTML = '';

                program.lines.forEach((line, index) => {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'code-line';
                    lineDiv.innerHTML = `
                        <code>${line.code}</code>
                        <div class="explanation">${line.explanation}</div>
                    `;
                    details.appendChild(lineDiv);
                });

                document.getElementById('modal').classList.add('show');

                showNextLine();
            });
        });

        function showNextLine() {
            const codeLines = document.querySelectorAll('#program-details .code-line');
            if (currentLineIndex < codeLines.length - 1) {
                currentLineIndex++;
                codeLines[currentLineIndex].classList.add('active');
            }
            if (currentLineIndex === codeLines.length - 1) {
                document.getElementById('next-btn').style.display = 'none';
            }
        }

        document.getElementById('next-btn').addEventListener('click', () => {
            showNextLine();
        });

        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') {
                document.getElementById('modal').classList.remove('show');
                document.getElementById('next-btn').style.display = 'block';
            }
        });

        document.getElementById('close-btn').addEventListener('click', () => {
            document.getElementById('modal').classList.remove('show');
            document.getElementById('next-btn').style.display = 'block';
        });

        document.getElementById('modal-content').addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
</body>
</html>