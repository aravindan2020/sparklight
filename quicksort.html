<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Sort Sliding Window</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1, h2 {
            text-align: center;
        }
        section {
            background-color: #fff;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        pre {
            background-color: #f9f9f9;
            padding: 10px;
            border-left: 4px solid #007bff;
            overflow-x: auto;
            font-family: monospace;
            white-space: pre-wrap;
        }
        ul#program-list {
            list-style-type: none;
            padding: 0;
        }
        li {
            background-color: #fff;
            margin: 10px 0;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        li:hover {
            background-color: #e0e0e0;
        }
        #modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        #modal.show {
            display: flex;
            opacity: 1;
        }
        #modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.5s ease;
        }
        #modal.show #modal-content {
            transform: scale(1);
        }
        #close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
        }
        #next-btn {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }
        #next-btn:hover {
            background-color: #0056b3;
        }
        .code-line {
            display: none;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-left: 4px solid #007bff;
        }
        .code-line.active {
            display: block;
        }
        .code-line code {
            display: block;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .explanation {
            font-style: italic;
            color: #555;
            margin-top: 5px;
        }
        #step-by-step .slide {
            display: none;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        #step-by-step .slide.active {
            display: block;
            animation: slideIn 0.5s ease-in-out;
        }
        #step-by-step .pass-step p {
            margin: 5px 0;
        }
        #next-step-btn {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }
        #next-step-btn:hover {
            background-color: #218838;
        }
        .highlight {
            font-size: 1.5em;
            font-weight: bold;
            color: #d32f2f;
        }
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <h1>Quick Sort</h1>
    
    <section id="definition">
        <h2>Definition</h2>
        <p>Quick Sort is a divide-and-conquer sorting algorithm that selects a pivot element, partitions the array around the pivot by placing smaller elements before it and larger elements after it, and recursively sorts the resulting subarrays. It is in-place but not stable, with an average time complexity of O(n log n) and a worst-case of O(n²) when the pivot is poorly chosen. Quick Sort is widely used due to its efficiency for large datasets and in-place operation.</p>
    </section>
    
    <section id="step-by-step">
        <h2>Step-by-Step Sorting (Sample Array: 8, 7, 6, 5, 4, 3, 2, 1)</h2>
        <div id="slides-container"></div>
        <button id="next-step-btn">Next Step</button>
    </section>
    
    <section id="program">
        <h2>Java Program for Quick Sort</h2>
        <ul id="program-list">
            <li data-program="1">Click to view Quick Sort Program line by line</li>
        </ul>
    </section>
    
    <section id="output">
        <h2>Output with Partitioning Steps</h2>
        <pre id="output-pre">
Initial array:
8 7 6 5 4 3 2 1 
After partition (pivot 1):
1 7 6 5 4 3 2 8 
After partition (pivot 8):
1 7 6 5 4 3 2 8 
After partition (pivot 2):
1 2 6 5 4 3 7 8 
After partition (pivot 7):
1 2 6 5 4 3 7 8 
After partition (pivot 3):
1 2 3 5 4 6 7 8 
After partition (pivot 6):
1 2 3 5 4 6 7 8 
After partition (pivot 4):
1 2 3 4 5 6 7 8 
        </pre>
    </section>
    
    <section id="real-world">
        <h2>Real-World Examples</h2>
        <ul>
            <li>Educational purposes: Used to teach divide-and-conquer algorithms due to its efficient partitioning approach. <a href="https://www.geeksforgeeks.org/quick-sort/">(GeeksforGeeks)</a></li>
            <li>Large datasets: Preferred for sorting large arrays in memory due to its in-place nature and average-case O(n log n) performance. <a href="https://www.programiz.com/dsa/quick-sort">(Programiz)</a></li>
            <li>General-purpose sorting: Used in standard library implementations (e.g., C’s qsort, Java’s Arrays.sort) for its speed. <a href="https://www.javatpoint.com/quick-sort">(JavatPoint)</a></li>
            <li>Real-time applications: Applied in scenarios requiring fast sorting, such as graphics rendering or event handling. <a href="https://www.tutorialspoint.com/data_structures_algorithms/quick_sort_algorithm.htm">(TutorialsPoint)</a></li>
            <li>Real-life analogies: Similar to organizing a group by repeatedly dividing into smaller and larger subgroups based on a reference point. <a href="https://www.quora.com/What-are-some-real-world-applications-of-quick-sort">(Quora)</a></li>
        </ul>
    </section>
    
    <div id="modal">
        <div id="modal-content">
            <span id="close-btn">&times;</span>
            <h2 id="program-title"></h2>
            <div id="program-details"></div>
            <button id="next-btn">Next Line</button>
        </div>
    </div>
    
    <script>
        const steps = [
            {
                title: "Initial Array",
                array: [8, 7, 6, 5, 4, 3, 2, 1],
                operations: [],
                explanation: "This is the starting array, in reverse order (descending). Quick Sort will select a pivot (here, the last element), partition the array around it, and recursively sort the subarrays."
            },
            {
                title: "Partition 1: Pivot 1 (Indices 0 to 7)",
                array: [1, 7, 6, 5, 4, 3, 2, 8],
                operations: [
                    { indices: [7], array: [8, 7, 6, 5, 4, 3, 2, 1], desc: "Choose pivot: 1 (index 7)." },
                    { indices: [0, 7], array: [1, 7, 6, 5, 4, 3, 2, 8], desc: "Compare 8 with pivot 1: 8 > 1, no swap. Swap pivot 1 with 8 (index 0) → place 1 at index 0." }
                ],
                explanation: "Select pivot 1 (last element). Partition [0,7]: All elements (8,7,6,5,4,3,2) are > 1, so pivot 1 swaps with 8 at index 0. Pivot is now at index 0. Subarrays: [1] (sorted), [7,6,5,4,3,2,8] (indices 1 to 7)."
            },
            {
                title: "Partition 2: Pivot 8 (Indices 1 to 7)",
                array: [1, 7, 6, 5, 4, 3, 2, 8],
                operations: [
                    { indices: [7], array: [1, 7, 6, 5, 4, 3, 2, 8], desc: "Choose pivot: 8 (index 7)." },
                    { indices: [1, 2], array: [1, 6, 7, 5, 4, 3, 2, 8], desc: "Compare 7 with pivot 8: 7 < 8, swap 7 with itself (no change)." },
                    { indices: [2, 3], array: [1, 6, 5, 7, 4, 3, 2, 8], desc: "Compare 6 with pivot 8: 6 < 8, swap 6 with 7." },
                    { indices: [3, 4], array: [1, 6, 5, 4, 7, 3, 2, 8], desc: "Compare 5 with pivot 8: 5 < 8, swap 5 with 7." },
                    { indices: [4, 5], array: [1, 6, 5, 4, 3, 7, 2, 8], desc: "Compare 4 with pivot 8: 4 < 8, swap 4 with 7." },
                    { indices: [5, 6], array: [1, 6, 5, 4, 3, 2, 7, 8], desc: "Compare 3 with pivot 8: 3 < 8, swap 3 with 7." },
                    { indices: [6, 7], array: [1, 6, 5, 4, 3, 2, 7, 8], desc: "Compare 2 with pivot 8: 2 < 8, swap 2 with 7." },
                    { indices: [6, 7], array: [1, 6, 5, 4, 3, 2, 7, 8], desc: "Place pivot 8 at index 7 (no swap needed)." }
                ],
                explanation: "Select pivot 8 (last element). Partition [1,7]: Elements < 8 (6,5,4,3,2,7) are moved left by swapping. Pivot 8 is already at index 7. Subarrays: [6,5,4,3,2,7] (indices 1 to 6), [8] (sorted)."
            },
            {
                title: "Partition 3: Pivot 7 (Indices 1 to 6)",
                array: [1, 2, 6, 5, 4, 3, 7, 8],
                operations: [
                    { indices: [6], array: [1, 6, 5, 4, 3, 2, 7, 8], desc: "Choose pivot: 7 (index 6)." },
                    { indices: [1, 2], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 6 with pivot 7: 6 < 7, swap 6 with itself (no change)." },
                    { indices: [2, 3], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 5 with pivot 7: 5 < 7, swap 5 with itself (no change)." },
                    { indices: [3, 4], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 4 with pivot 7: 4 < 7, swap 4 with itself (no change)." },
                    { indices: [4, 5], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 3 with pivot 7: 3 < 7, swap 3 with itself (no change)." },
                    { indices: [5, 6], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 2 with pivot 7: 2 < 7, swap 2 with 6." },
                    { indices: [1, 6], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Place pivot 7 at index 6 (no swap needed)." }
                ],
                explanation: "Select pivot 7 (last element). Partition [1,6]: Elements < 7 (2,5,4,3,6) are moved left. Swap 2 with 6 to place 2 left of pivot. Pivot 7 is at index 6. Subarrays: [2,5,4,3,6] (indices 1 to 5), [7,8] (sorted)."
            },
            {
                title: "Partition 4: Pivot 6 (Indices 1 to 5)",
                array: [1, 2, 3, 5, 4, 6, 7, 8],
                operations: [
                    { indices: [5], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Choose pivot: 6 (index 5)." },
                    { indices: [1, 2], array: [1, 2, 5, 4, 3, 6, 7, 8], desc: "Compare 2 with pivot 6: 2 < 6, swap 2 with itself (no change)." },
                    { indices: [2, 3], array: [1, 2, 4, 5, 3, 6, 7, 8], desc: "Compare 5 with pivot 6: 5 < 6, swap 5 with itself (no change)." },
                    { indices: [3, 4], array: [1, 2, 4, 3, 5, 6, 7, 8], desc: "Compare 4 with pivot 6: 4 < 6, swap 4 with 5." },
                    { indices: [4, 5], array: [1, 2, 4, 3, 5, 6, 7, 8], desc: "Compare 3 with pivot 6: 3 < 6, swap 3 with 5." },
                    { indices: [4, 5], array: [1, 2, 4, 3, 5, 6, 7, 8], desc: "Place pivot 6 at index 5 (no swap needed)." }
                ],
                explanation: "Select pivot 6 (last element). Partition [1,5]: Elements < 6 (2,4,3,5) are moved left. Swap 4 with 5, then 3 with 5. Pivot 6 is at index 5. Subarrays: [2,4,3,5] (indices 1 to 4), [6,7,8] (sorted)."
            },
            {
                title: "Partition 5: Pivot 5 (Indices 1 to 4)",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [
                    { indices: [4], array: [1, 2, 4, 3, 5, 6, 7, 8], desc: "Choose pivot: 5 (index 4)." },
                    { indices: [1, 2], array: [1, 2, 4, 3, 5, 6, 7, 8], desc: "Compare 2 with pivot 5: 2 < 5, swap 2 with itself (no change)." },
                    { indices: [2, 3], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Compare 4 with pivot 5: 4 < 5, swap 4 with itself (no change)." },
                    { indices: [3, 4], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Compare 3 with pivot 5: 3 < 5, swap 3 with 4." },
                    { indices: [3, 4], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Place pivot 5 at index 4 (no swap needed)." }
                ],
                explanation: "Select pivot 5 (last element). Partition [1,4]: Elements < 5 (2,3,4) are moved left. Swap 3 with 4. Pivot 5 is at index 4. Subarrays: [2,3,4] (indices 1 to 3), [5,6,7,8] (sorted)."
            },
            {
                title: "Partition 6: Pivot 4 (Indices 1 to 3)",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [
                    { indices: [3], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Choose pivot: 4 (index 3)." },
                    { indices: [1, 2], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Compare 2 with pivot 4: 2 < 4, swap 2 with itself (no change)." },
                    { indices: [2, 3], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Compare 3 with pivot 4: 3 < 4, swap 3 with itself (no change)." },
                    { indices: [2, 3], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Place pivot 4 at index 3 (no swap needed)." }
                ],
                explanation: "Select pivot 4 (last element). Partition [1,3]: Elements < 4 (2,3) are already left. Pivot 4 is at index 3. Subarrays: [2,3] (indices 1 to 2), [4,5,6,7,8] (sorted)."
            },
            {
                title: "Partition 7: Pivot 3 (Indices 1 to 2)",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [
                    { indices: [2], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Choose pivot: 3 (index 2)." },
                    { indices: [1, 2], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Compare 2 with pivot 3: 2 < 3, swap 2 with itself (no change)." },
                    { indices: [1, 2], array: [1, 2, 3, 4, 5, 6, 7, 8], desc: "Place pivot 3 at index 2 (no swap needed)." }
                ],
                explanation: "Select pivot 3 (last element). Partition [1,2]: Element < 3 (2) is already left. Pivot 3 is at index 2. Subarrays: [2] (sorted), [3,4,5,6,7,8] (sorted)."
            },
            {
                title: "Final Sorted Array",
                array: [1, 2, 3, 4, 5, 6, 7, 8],
                operations: [],
                explanation: "After partitioning and recursively sorting all subarrays, the array is fully sorted in ascending order. Quick Sort’s efficient partitioning moved elements around pivots, reducing the problem size recursively."
            }
        ];

        let currentStepIndex = 0;

        function renderSlides() {
            const container = document.getElementById('slides-container');
            container.innerHTML = '';
            steps.forEach((step, index) => {
                const slide = document.createElement('div');
                slide.className = `slide ${index === currentStepIndex ? 'active' : ''}`;
                let content = `<p><strong>${step.title}:</strong> [`;
                step.array.forEach((num, i) => {
                    content += i === 0 ? `${num}` : `, ${num}`;
                });
                content += ']</p>';
                if (step.operations.length > 0) {
                    content += '<p><em>Partition Operations:</em></p>';
                    step.operations.forEach(op => {
                        let arrayStr = '[';
                        op.array.forEach((num, i) => {
                            const isHighlighted = op.indices.includes(i);
                            arrayStr += i === 0 ? '' : ', ';
                            arrayStr += isHighlighted ? `<span class="highlight">${num}</span>` : num;
                        });
                        arrayStr += ']';
                        content += `<p>${op.desc} → ${arrayStr}</p>`;
                    });
                }
                content += `<p><em>Positioning:</em> ${step.explanation}</p>`;
                slide.innerHTML = content;
                container.appendChild(slide);
            });
        }

        document.getElementById('next-step-btn').addEventListener('click', () => {
            currentStepIndex = (currentStepIndex + 1) % steps.length;
            renderSlides();
        });

        renderSlides();

        const programs = {
            1: {
                title: "Quick Sort Program in Java (with Sample Array and Partition Outputs)",
                lines: [
                    { code: 'public class QuickSortExample {', explanation: 'Defines the public class QuickSortExample. This class contains the main logic for the quick sort demonstration. In Java, classes organize code into reusable units. The public modifier allows access from outside.' },
                    { code: '    public static void main(String[] args) {', explanation: 'Declares the main method, the entry point of the program. It is static to be callable without an instance. String[] args handles command-line arguments. This method initiates the sorting.' },
                    { code: '        int[] arr = {8, 7, 6, 5, 4, 3, 2, 1};', explanation: 'Initializes the integer array arr with the sample elements. Uses curly braces for direct initialization. Sets up the reverse-sorted array for demonstration.' },
                    { code: '        System.out.println("Initial array:");', explanation: 'Prints a header for the initial array state. Uses println to add a newline. System.out is the standard output stream. Enhances output readability.' },
                    { code: '        printArray(arr);', explanation: 'Calls the printArray method to display the array. Passes arr as argument. Separates printing logic for reusability. Shows the initial state.' },
                    { code: '        quickSort(arr, 0, arr.length - 1);', explanation: 'Calls quickSort with the array, start index (0), and end index (length-1). Initiates the recursive divide-and-conquer process.' },
                    { code: '    }', explanation: 'Closes the main method. Encapsulates the entry point logic.' },
                    { code: '    public static void quickSort(int[] arr, int low, int high) {', explanation: 'Defines the recursive quickSort method. Takes the array, low index, and high index as parameters. Implements the divide-and-conquer strategy.' },
                    { code: '        if (low < high) {', explanation: 'Checks if the subarray has more than one element (low < high). If true, proceed with partitioning; otherwise, subarray is sorted.' },
                    { code: '            int pi = partition(arr, low, high);', explanation: 'Calls partition to place the pivot in its final position and get its index (pi). Partitions the array into subarrays.' },
                    { code: '            quickSort(arr, low, pi - 1);', explanation: 'Recursively sorts the left subarray (elements < pivot) from index low to pi-1.' },
                    { code: '            quickSort(arr, pi + 1, high);', explanation: 'Recursively sorts the right subarray (elements > pivot) from index pi+1 to high.' },
                    { code: '        }', explanation: 'Closes the if block. Ensures recursive calls only occur for valid subarrays.' },
                    { code: '    }', explanation: 'Closes the quickSort method. Completes the recursive sorting logic.' },
                    { code: '    public static int partition(int[] arr, int low, int high) {', explanation: 'Defines the partition method to rearrange elements around a pivot. Returns the pivot’s final index.' },
                    { code: '        int pivot = arr[high];', explanation: 'Selects the pivot as the last element (arr[high]). This is a common pivot choice for simplicity.' },
                    { code: '        int i = low - 1;', explanation: 'Initializes i as the index of the last element smaller than the pivot, starting at low-1.' },
                    { code: '        for (int j = low; j < high; j++) {', explanation: 'Loop through the subarray from low to high-1 to compare elements with the pivot.' },
                    { code: '            if (arr[j] <= pivot) {', explanation: 'If arr[j] is less than or equal to the pivot, it belongs in the left subarray.' },
                    { code: '                i++;', explanation: 'Increment i to point to the next position in the smaller-than-pivot region.' },
                    { code: '                int temp = arr[i];', explanation: 'Swap arr[i] and arr[j] to move arr[j] to the left subarray. Store arr[i] in temp.' },
                    { code: '                arr[i] = arr[j];', explanation: 'Place arr[j] at index i.' },
                    { code: '                arr[j] = temp;', explanation: 'Place temp (original arr[i]) at index j.' },
                    { code: '            }', explanation: 'Closes the if block for elements <= pivot.' },
                    { code: '        }', explanation: 'Closes the for loop. All elements < pivot are now left of i.' },
                    { code: '        int temp = arr[i + 1];', explanation: 'Swap the pivot with the element at i+1 to place the pivot in its final position.' },
                    { code: '        arr[i + 1] = arr[high];', explanation: 'Place the pivot at index i+1.' },
                    { code: '        arr[high] = temp;', explanation: 'Place temp (original arr[i+1]) at index high.' },
                    { code: '        System.out.println("After partition (pivot " + pivot + "):");', explanation: 'Prints a header for the partition result, showing the pivot value.' },
                    { code: '        printArray(arr);', explanation: 'Calls printArray to show the array after partitioning.' },
                    { code: '        return i + 1;', explanation: 'Returns the pivot’s final index (i+1) for recursive calls.' },
                    { code: '    }', explanation: 'Closes the partition method. Completes the partitioning logic.' },
                    { code: '    private static void printArray(int[] arr) {', explanation: 'Defines a private static helper method printArray. Takes int[] arr as parameter. Handles array printing.' },
                    { code: '        for (int num : arr) {', explanation: 'Enhanced for loop to iterate array. num takes each element value. Simplifies printing.' },
                    { code: '            System.out.print(num + " ");', explanation: 'Prints each num followed by a space. Builds the array output.' },
                    { code: '        }', explanation: 'Closes the enhanced for loop. Ends element iteration.' },
                    { code: '        System.out.println();', explanation: 'Prints a newline after array. Ensures clean output formatting.' },
                    { code: '    }', explanation: 'Closes the printArray method. Ends helper logic.' },
                    { code: '}', explanation: 'Closes the class definition. Encapsulates all methods. Program is complete.' }
                ]
            }
        };

        let currentLineIndex = -1;

        document.querySelectorAll('#program-list li').forEach(item => {
            item.addEventListener('click', () => {
                const programId = item.getAttribute('data-program');
                const program = programs[programId];
                if (!program) {
                    console.error(`Program ${programId} not found`);
                    return;
                }

                currentLineIndex = -1;

                document.getElementById('program-title').textContent = program.title;

                const details = document.getElementById('program-details');
                details.innerHTML = '';

                program.lines.forEach((line, index) => {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'code-line';
                    lineDiv.innerHTML = `
                        <code>${line.code}</code>
                        <div class="explanation">${line.explanation}</div>
                    `;
                    details.appendChild(lineDiv);
                });

                document.getElementById('modal').classList.add('show');

                showNextLine();
            });
        });

        function showNextLine() {
            const codeLines = document.querySelectorAll('#program-details .code-line');
            if (currentLineIndex < codeLines.length - 1) {
                currentLineIndex++;
                codeLines[currentLineIndex].classList.add('active');
            }
            if (currentLineIndex === codeLines.length - 1) {
                document.getElementById('next-btn').style.display = 'none';
            }
        }

        document.getElementById('next-btn').addEventListener('click', () => {
            showNextLine();
        });

        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') {
                document.getElementById('modal').classList.remove('show');
                document.getElementById('next-btn').style.display = 'block';
            }
        });

        document.getElementById('close-btn').addEventListener('click', () => {
            document.getElementById('modal').classList.remove('show');
            document.getElementById('next-btn').style.display = 'block';
        });

        document.getElementById('modal-content').addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
</body>
</html>